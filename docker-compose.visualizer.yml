# Only runs frontend
version: '3'
services:
  frontend:
    build: frontend
    environment:
      # Public URL is settable from the
      # local environment
      - DEBUG=1
      # The two possible app modes are ANNOTATION and PREDICTION
      - APPMODE=PREDICTION
      - PUBLIC_URL=/
      - API_BASE_URL=http://cosmos1.chtc.wisc.edu:5080/search
      - IMAGE_BASE_URL=http://cosmos1.chtc.wisc.edu:5080/images/
    volumes:
      - ./frontend-shared/src:/user/src
      - visualizer_dist:/user/dist
      - ./logs:/logs
  gateway:
    image: nginx
    ports:
      - "5080:80"
    volumes:
      - ./frontend-shared/logs:/logs
      - visualizer_dist:/frontend:ro
      - ./frontend/nginx.frontend-only.conf:/etc/nginx/nginx.conf:ro
volumes:
  visualizer_dist:
#
# # can now do things like connections.create_connection(hosts=['es01'], timeout=20)
# networks:
#    default:
#       external:
#          name: elasticsearch_esnet
