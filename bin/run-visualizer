#!/usr/bin/env zsh
# Run the public visualizer

cd "${0:h:h}"

# Searate this from the visualizer
export COMPOSE_PROJECT_NAME="cosmos-visualizer"

function compose {
  docker-compose -f docker-compose.shared.yml -f docker-compose.visualizer.yml $@
}

export MAGIC_MODE=0
export DEBUG=1
# Public URL can be set to root for debug but needs
# to be set to _actual_ public base URL if reloaded.
export PUBLIC_URL="/"

compose up --detach --force-recreate --build $@
if [ $? -eq 0 ]; then
  compose logs -f
else
  echo "Error starting containers"
fi
