#!/usr/bin/env zsh

cd "${0:h:h}"

export COMPOSE_PROJECT_NAME="cosmos-validation"

function compose {
  docker-compose -f docker-compose.validation.yml $@
}

export MAGIC_MODE=0
export DEBUG=1
# Public URL can be set to root for debug but needs
# to be set to _actual_ public base URL if reloaded.
export PUBLIC_URL="/"

compose up --detach --force-recreate --build $@
if [ $? -eq 0 ]; then
  compose logs -f
else
  echo "Error starting containers"
fi
